<?xml version="1.0" encoding="UTF-8"?>
<dynaForm type="xmlform" name="CalendarDefinition" width="600" enabletemplate="1" mode="edit">
  <CALENDAR_UID type="hidden" size="32" maxlength="32">
    <en>Ndar Uid
  </en>
  </CALENDAR_UID>
  <DEFINITION_TITLE type="title" enablehtml="0">
    <en><![CDATA[Calendar Definition]]></en>
    <ar-EG><![CDATA[Calendar Definition]]></ar-EG>
    <cs-CZ><![CDATA[Calendar Definition]]></cs-CZ>
    <da-DK><![CDATA[Calendar Definition]]></da-DK>
    <de-DE><![CDATA[Calendar Definition]]></de-DE>
    <es><![CDATA[Definición de calendario]]></es>
    <fi-FI><![CDATA[Calendar Definition]]></fi-FI>
    <fr-FR><![CDATA[Definition Calendrier]]></fr-FR>
    <it-IT><![CDATA[Calendar Definition]]></it-IT>
    <he-IL><![CDATA[Calendar Definition]]></he-IL>
    <nl-NL><![CDATA[Calendar Definition]]></nl-NL>
    <pl-PL><![CDATA[Calendar Definition]]></pl-PL>
    <pt-BR><![CDATA[Calendar Definition]]></pt-BR>
    <ru-RU><![CDATA[Настройки рабочего календаря]]></ru-RU>
    <zh-CN><![CDATA[Calendar Definition]]></zh-CN>
    <zh-TW><![CDATA[Calendar Definition]]></zh-TW>
  </DEFINITION_TITLE>
  <CALENDAR_NAME type="text" maxlength="100" validate="Any" required="1" readonly="0" size="15" mode="edit" mask="" strto="" dependentfields="" defaultvalue="" hint="" formula="" function="" sqlconnection="" savelabel="0" onclick="setFocusByIdField;">
    <en><![CDATA[Name]]></en>
    <ar-EG><![CDATA[Name]]></ar-EG>
    <cs-CZ><![CDATA[Name]]></cs-CZ>
    <da-DK><![CDATA[Name]]></da-DK>
    <de-DE><![CDATA[Name]]></de-DE>
    <es><![CDATA[Nombre]]></es>
    <fi-FI><![CDATA[Name]]></fi-FI>
    <fr-FR><![CDATA[Nom]]></fr-FR>
    <it-IT><![CDATA[Name]]></it-IT>
    <he-IL><![CDATA[Name]]></he-IL>
    <nl-NL><![CDATA[Name]]></nl-NL>
    <pl-PL><![CDATA[Name]]></pl-PL>
    <pt-BR><![CDATA[Name]]></pt-BR>
    <ru-RU><![CDATA[Имя]]></ru-RU>
    <zh-CN><![CDATA[Name]]></zh-CN>
    <zh-TW><![CDATA[Name]]></zh-TW>
  </CALENDAR_NAME>
  <CALENDAR_DESCRIPTION type="textarea" required="0" readonly="0" rows="2" cols="32" mode="edit">
    <en><![CDATA[Description]]></en>
    <ar-EG><![CDATA[Description]]></ar-EG>
    <cs-CZ><![CDATA[Description]]></cs-CZ>
    <da-DK><![CDATA[Description]]></da-DK>
    <de-DE><![CDATA[Beschreibung]]></de-DE>
    <es><![CDATA[Descripción]]></es>
    <fi-FI><![CDATA[Description]]></fi-FI>
    <fr-FR><![CDATA[Description]]></fr-FR>
    <it-IT><![CDATA[Description]]></it-IT>
    <he-IL><![CDATA[Description]]></he-IL>
    <nl-NL><![CDATA[Description]]></nl-NL>
    <pl-PL><![CDATA[Description]]></pl-PL>
    <pt-BR><![CDATA[Description]]></pt-BR>
    <ru-RU><![CDATA[Описание]]></ru-RU>
    <zh-CN><![CDATA[Description]]></zh-CN>
    <zh-TW><![CDATA[Description]]></zh-TW>
  </CALENDAR_DESCRIPTION>
  <CALENDAR_STATUS type="checkbox" value="ACTIVE" falsevalue="INACTIVE" defaultvalue="ACTIVE" labelonright="1" enablehtml="0">
    <en><![CDATA[Active]]></en>
    <ar-EG><![CDATA[Active]]></ar-EG>
    <cs-CZ><![CDATA[Active]]></cs-CZ>
    <da-DK><![CDATA[Active]]></da-DK>
    <de-DE><![CDATA[Aktiv]]></de-DE>
    <es><![CDATA[Activo]]></es>
    <fi-FI><![CDATA[Active]]></fi-FI>
    <fr-FR><![CDATA[Actif]]></fr-FR>
    <it-IT><![CDATA[Active]]></it-IT>
    <he-IL><![CDATA[Active]]></he-IL>
    <nl-NL><![CDATA[Active]]></nl-NL>
    <pl-PL><![CDATA[Active]]></pl-PL>
    <pt-BR><![CDATA[Active]]></pt-BR>
    <ru-RU><![CDATA[Действующий]]></ru-RU>
    <zh-CN><![CDATA[Active]]></zh-CN>
    <zh-TW><![CDATA[Active]]></zh-TW>
  </CALENDAR_STATUS>
  <WorkDays type="title" enablehtml="0">
    <en><![CDATA[Work Days]]></en>
    <ar-EG><![CDATA[Work Days]]></ar-EG>
    <cs-CZ><![CDATA[Work Days]]></cs-CZ>
    <da-DK><![CDATA[Work Days]]></da-DK>
    <de-DE><![CDATA[Arbeitstage]]></de-DE>
    <es><![CDATA[Días de trabajo]]></es>
    <fi-FI><![CDATA[Work Days]]></fi-FI>
    <fr-FR><![CDATA[Jours de travail]]></fr-FR>
    <it-IT><![CDATA[Work Days]]></it-IT>
    <he-IL><![CDATA[Work Days]]></he-IL>
    <nl-NL><![CDATA[Work Days]]></nl-NL>
    <pl-PL><![CDATA[Work Days]]></pl-PL>
    <pt-BR><![CDATA[Work Days]]></pt-BR>
    <ru-RU><![CDATA[Рабочие дни]]></ru-RU>
    <zh-CN><![CDATA[Work Days]]></zh-CN>
    <zh-TW><![CDATA[Work Days]]></zh-TW>
  </WorkDays>
  <CALENDAR_WORK_DAYS type="checkgroup" defaultvalue="1|2|3|4|5" mode="edit" options="Array">
    <en>
      <option name="0"><![CDATA[SUN]]></option>
      <option name="1"><![CDATA[MON]]></option>
      <option name="2"><![CDATA[TUE]]></option>
      <option name="3"><![CDATA[WED]]></option>
      <option name="4"><![CDATA[THU]]></option>
      <option name="5"><![CDATA[FRI]]></option>
      <option name="6"><![CDATA[SAT]]></option>
    </en>
    <ar-EG>
      <option name="0"><![CDATA[SUN]]></option>
      <option name="1"><![CDATA[MON]]></option>
      <option name="2"><![CDATA[TUE]]></option>
      <option name="3"><![CDATA[WED]]></option>
      <option name="4"><![CDATA[THU]]></option>
      <option name="5"><![CDATA[FRI]]></option>
      <option name="6"><![CDATA[SAT]]></option>
    </ar-EG>
    <cs-CZ>
      <option name="0"><![CDATA[SUN]]></option>
      <option name="1"><![CDATA[MON]]></option>
      <option name="2"><![CDATA[TUE]]></option>
      <option name="3"><![CDATA[WED]]></option>
      <option name="4"><![CDATA[THU]]></option>
      <option name="5"><![CDATA[FRI]]></option>
      <option name="6"><![CDATA[SAT]]></option>
    </cs-CZ>
    <da-DK>
      <option name="0"><![CDATA[SUN]]></option>
      <option name="1"><![CDATA[MON]]></option>
      <option name="2"><![CDATA[TUE]]></option>
      <option name="3"><![CDATA[WED]]></option>
      <option name="4"><![CDATA[THU]]></option>
      <option name="5"><![CDATA[FRI]]></option>
      <option name="6"><![CDATA[SAT]]></option>
    </da-DK>
    <de-DE>
      <option name="0"><![CDATA[SON]]></option>
      <option name="1"><![CDATA[MON]]></option>
      <option name="2"><![CDATA[DIE]]></option>
      <option name="3"><![CDATA[MIT]]></option>
      <option name="4"><![CDATA[DON]]></option>
      <option name="5"><![CDATA[FRE]]></option>
      <option name="6"><![CDATA[SAM]]></option>
    </de-DE>
    <es>
      <option name="0"><![CDATA[DOM]]></option>
      <option name="1"><![CDATA[LUN]]></option>
      <option name="2"><![CDATA[MAR]]></option>
      <option name="3"><![CDATA[MIE]]></option>
      <option name="4"><![CDATA[JUE]]></option>
      <option name="5"><![CDATA[VIE]]></option>
      <option name="6"><![CDATA[SAB]]></option>
    </es>
    <fi-FI>
      <option name="0"><![CDATA[SUN]]></option>
      <option name="1"><![CDATA[MON]]></option>
      <option name="2"><![CDATA[TUE]]></option>
      <option name="3"><![CDATA[WED]]></option>
      <option name="4"><![CDATA[THU]]></option>
      <option name="5"><![CDATA[FRI]]></option>
      <option name="6"><![CDATA[SAT]]></option>
    </fi-FI>
    <fr-FR>
      <option name="0"><![CDATA[SUN]]></option>
      <option name="1"><![CDATA[MON]]></option>
      <option name="2"><![CDATA[TUE]]></option>
      <option name="3"><![CDATA[WED]]></option>
      <option name="4"><![CDATA[THU]]></option>
      <option name="5"><![CDATA[FRI]]></option>
      <option name="6"><![CDATA[SAT]]></option>
    </fr-FR>
    <it-IT>
      <option name="0"><![CDATA[SUN]]></option>
      <option name="1"><![CDATA[MON]]></option>
      <option name="2"><![CDATA[TUE]]></option>
      <option name="3"><![CDATA[WED]]></option>
      <option name="4"><![CDATA[THU]]></option>
      <option name="5"><![CDATA[FRI]]></option>
      <option name="6"><![CDATA[SAT]]></option>
    </it-IT>
    <he-IL>
      <option name="0"><![CDATA[SUN]]></option>
      <option name="1"><![CDATA[MON]]></option>
      <option name="2"><![CDATA[TUE]]></option>
      <option name="3"><![CDATA[WED]]></option>
      <option name="4"><![CDATA[THU]]></option>
      <option name="5"><![CDATA[FRI]]></option>
      <option name="6"><![CDATA[SAT]]></option>
    </he-IL>
    <nl-NL>
      <option name="0"><![CDATA[SUN]]></option>
      <option name="1"><![CDATA[MON]]></option>
      <option name="2"><![CDATA[TUE]]></option>
      <option name="3"><![CDATA[WED]]></option>
      <option name="4"><![CDATA[THU]]></option>
      <option name="5"><![CDATA[FRI]]></option>
      <option name="6"><![CDATA[SAT]]></option>
    </nl-NL>
    <pl-PL>
      <option name="0"><![CDATA[SUN]]></option>
      <option name="1"><![CDATA[MON]]></option>
      <option name="2"><![CDATA[TUE]]></option>
      <option name="3"><![CDATA[WED]]></option>
      <option name="4"><![CDATA[THU]]></option>
      <option name="5"><![CDATA[FRI]]></option>
      <option name="6"><![CDATA[SAT]]></option>
    </pl-PL>
    <pt-BR>
      <option name="0"><![CDATA[SUN]]></option>
      <option name="1"><![CDATA[MON]]></option>
      <option name="2"><![CDATA[TUE]]></option>
      <option name="3"><![CDATA[WED]]></option>
      <option name="4"><![CDATA[THU]]></option>
      <option name="5"><![CDATA[FRI]]></option>
      <option name="6"><![CDATA[SAT]]></option>
    </pt-BR>
    <ru-RU>
      <option name="0"><![CDATA[SUN]]></option>
      <option name="1"><![CDATA[MON]]></option>
      <option name="2"><![CDATA[TUE]]></option>
      <option name="3"><![CDATA[WED]]></option>
      <option name="4"><![CDATA[THU]]></option>
      <option name="5"><![CDATA[FRI]]></option>
      <option name="6"><![CDATA[SAT]]></option>
    </ru-RU>
    <zh-CN>
      <option name="0"><![CDATA[SUN]]></option>
      <option name="1"><![CDATA[MON]]></option>
      <option name="2"><![CDATA[TUE]]></option>
      <option name="3"><![CDATA[WED]]></option>
      <option name="4"><![CDATA[THU]]></option>
      <option name="5"><![CDATA[FRI]]></option>
      <option name="6"><![CDATA[SAT]]></option>
    </zh-CN>
    <zh-TW>
      <option name="0"><![CDATA[SUN]]></option>
      <option name="1"><![CDATA[MON]]></option>
      <option name="2"><![CDATA[TUE]]></option>
      <option name="3"><![CDATA[WED]]></option>
      <option name="4"><![CDATA[THU]]></option>
      <option name="5"><![CDATA[FRI]]></option>
      <option name="6"><![CDATA[SAT]]></option>
    </zh-TW>
  </CALENDAR_WORK_DAYS>
  <BUSINESS_DAY_TITLE type="title" enablehtml="0" required="0" readonly="0" savelabel="0">
    <en><![CDATA[Work Hours]]></en>
    <ar-EG><![CDATA[Work Hours]]></ar-EG>
    <cs-CZ><![CDATA[Work Hours]]></cs-CZ>
    <da-DK><![CDATA[Work Hours]]></da-DK>
    <de-DE><![CDATA[Arbeitstag]]></de-DE>
    <es><![CDATA[Día laborable]]></es>
    <fi-FI><![CDATA[Work Hours]]></fi-FI>
    <fr-FR><![CDATA[Jour ouvrables]]></fr-FR>
    <it-IT><![CDATA[Work Hours]]></it-IT>
    <he-IL><![CDATA[Work Hours]]></he-IL>
    <nl-NL><![CDATA[Business Day]]></nl-NL>
    <pl-PL><![CDATA[Work Hours]]></pl-PL>
    <pt-BR><![CDATA[Work Hours]]></pt-BR>
    <ru-RU><![CDATA[Рабочий день]]></ru-RU>
    <zh-CN><![CDATA[Work Hours]]></zh-CN>
    <zh-TW><![CDATA[Work Hours]]></zh-TW>
  </BUSINESS_DAY_TITLE>
  <BUSINESS_DAY type="grid" xmlgrid="setup/calendarEdit_BusinessHours" addrow="1" deleterow="1"/>
  <HOLIDAY_LABEL type="title" enablehtml="0" required="0" readonly="0" savelabel="0">
    <en><![CDATA[Holidays]]></en>
    <ar-EG><![CDATA[Holidays]]></ar-EG>
    <cs-CZ><![CDATA[Holidays]]></cs-CZ>
    <da-DK><![CDATA[Holidays]]></da-DK>
    <de-DE><![CDATA[Feiertag]]></de-DE>
    <es><![CDATA[Feriados]]></es>
    <fi-FI><![CDATA[Holidays]]></fi-FI>
    <fr-FR><![CDATA[Vacances]]></fr-FR>
    <it-IT><![CDATA[Holidays]]></it-IT>
    <he-IL><![CDATA[Holidays]]></he-IL>
    <nl-NL><![CDATA[Holidays]]></nl-NL>
    <pl-PL><![CDATA[Holidays]]></pl-PL>
    <pt-BR><![CDATA[Holidays]]></pt-BR>
    <ru-RU><![CDATA[Выходные]]></ru-RU>
    <zh-CN><![CDATA[Holidays]]></zh-CN>
    <zh-TW><![CDATA[Holidays]]></zh-TW>
  </HOLIDAY_LABEL>
  <HOLIDAY type="grid" xmlgrid="setup/calendarEdit_Holidays" addrow="1" deleterow="1"/>
  <SUBMIT type="submit" onclick="submit1(this);">
    <en><![CDATA[Save]]></en>
    <ar-EG><![CDATA[Save]]></ar-EG>
    <cs-CZ><![CDATA[Save]]></cs-CZ>
    <da-DK><![CDATA[Save]]></da-DK>
    <de-DE><![CDATA[Speichern]]></de-DE>
    <es><![CDATA[Guardar]]></es>
    <fi-FI><![CDATA[Save]]></fi-FI>
    <fr-FR><![CDATA[Sauver]]></fr-FR>
    <it-IT><![CDATA[Save]]></it-IT>
    <he-IL><![CDATA[Save]]></he-IL>
    <nl-NL><![CDATA[Save]]></nl-NL>
    <pl-PL><![CDATA[Save]]></pl-PL>
    <pt-BR><![CDATA[Save]]></pt-BR>
    <ru-RU><![CDATA[Сохранить]]></ru-RU>
    <zh-CN><![CDATA[Save]]></zh-CN>
    <zh-TW><![CDATA[Save]]></zh-TW>
  </SUBMIT>
  <SUBMIT2 type="button" onclick="submit2();   ">
    <en><![CDATA[Save]]></en>
    <ar-EG><![CDATA[Save]]></ar-EG>
    <cs-CZ><![CDATA[Save]]></cs-CZ>
    <da-DK><![CDATA[Save]]></da-DK>
    <de-DE><![CDATA[Save]]></de-DE>
    <es><![CDATA[Guardar]]></es>
    <fi-FI><![CDATA[Save]]></fi-FI>
    <fr-FR><![CDATA[Save]]></fr-FR>
    <it-IT><![CDATA[Save]]></it-IT>
    <he-IL><![CDATA[Save]]></he-IL>
    <nl-NL><![CDATA[Save]]></nl-NL>
    <pl-PL><![CDATA[Save]]></pl-PL>
    <pt-BR><![CDATA[Save]]></pt-BR>
    <ru-RU><![CDATA[Save]]></ru-RU>
    <zh-CN><![CDATA[Save]]></zh-CN>
    <zh-TW><![CDATA[Save]]></zh-TW>
  </SUBMIT2>
  <BTN_CANCEL type="button" onclick="cancel();">
    <en><![CDATA[Cancel]]></en>
    <ar-EG><![CDATA[Cancel]]></ar-EG>
    <cs-CZ><![CDATA[Cancel]]></cs-CZ>
    <da-DK><![CDATA[Cancel]]></da-DK>
    <de-DE><![CDATA[Abbrechen]]></de-DE>
    <es><![CDATA[Cancelar]]></es>
    <fi-FI><![CDATA[Cancel]]></fi-FI>
    <fr-FR><![CDATA[Annuler]]></fr-FR>
    <it-IT><![CDATA[Cancel]]></it-IT>
    <he-IL><![CDATA[Cancel]]></he-IL>
    <nl-NL><![CDATA[Annuleer]]></nl-NL>
    <pl-PL><![CDATA[Cancel]]></pl-PL>
    <pt-BR><![CDATA[Cancel]]></pt-BR>
    <ru-RU><![CDATA[Отменить]]></ru-RU>
    <zh-CN><![CDATA[Cancel]]></zh-CN>
    <zh-TW><![CDATA[Cancel]]></zh-TW>
  </BTN_CANCEL>
  <HOLIDAY_STATUS type="checkbox" value="ACTIVE" falsevalue="INACTIVE" defaultvalue="INACTIVE" labelonright="1" enablehtml="0" readonly="0">
    <en/>
    <ar-EG><![CDATA[Active]]></ar-EG>
    <cs-CZ><![CDATA[Active]]></cs-CZ>
    <da-DK><![CDATA[Active]]></da-DK>
    <de-DE><![CDATA[Active]]></de-DE>
    <es/>
    <fi-FI><![CDATA[Active]]></fi-FI>
    <fr-FR><![CDATA[Active]]></fr-FR>
    <it-IT><![CDATA[Active]]></it-IT>
    <he-IL><![CDATA[Active]]></he-IL>
    <nl-NL><![CDATA[Active]]></nl-NL>
    <pl-PL><![CDATA[Active]]></pl-PL>
    <pt-BR><![CDATA[Active]]></pt-BR>
    <ru-RU><![CDATA[Active]]></ru-RU>
    <zh-CN><![CDATA[Active]]></zh-CN>
    <zh-TW><![CDATA[Active]]></zh-TW>
  </HOLIDAY_STATUS>
  <BUSINESS_DAY_STATUS type="checkbox" value="ACTIVE" falsevalue="INACTIVE" defaultvalue="INACTIVE" labelonright="1" enablehtml="0" readonly="0">
    <en/>
    <ar-EG/>
    <cs-CZ/>
    <da-DK/>
    <es></es>
    <de-DE/>
    <fi-FI><![CDATA[Active]]></fi-FI>
    <fr-FR/>
    <it-IT/>
    <he-IL/>
    <nl-NL/>
    <pl-PL/>
    <pt-BR/>
    <ru-RU/>
    <zh-CN><![CDATA[Active]]></zh-CN>
    <zh-TW><![CDATA[Active]]></zh-TW>
  </BUSINESS_DAY_STATUS>
  <DEFAULT_CALENDAR_JS type="javascript"><![CDATA[
var invalidCalendarName = '';
function submit1 () {
  getField('CALENDAR_WORK_DAYS][0').disabled=false;
  getField('CALENDAR_WORK_DAYS][1').disabled=false;
  getField('CALENDAR_WORK_DAYS][2').disabled=false;
  getField('CALENDAR_WORK_DAYS][3').disabled=false;
  getField('CALENDAR_WORK_DAYS][4').disabled=false;
  getField('CALENDAR_WORK_DAYS][5').disabled=false;
  getField('CALENDAR_WORK_DAYS][6').disabled=false;
  getField('CALENDAR_STATUS').disabled=false;
  getField('CALENDAR_NAME').disabled=false;
  return validateForm(this.form);
}

function submit2 (){
  var startHourMessage = '';
  var endHourMessage = '';
  getField('CALENDAR_WORK_DAYS][0').disabled=false;
  getField('CALENDAR_WORK_DAYS][1').disabled=false;
  getField('CALENDAR_WORK_DAYS][2').disabled=false;
  getField('CALENDAR_WORK_DAYS][3').disabled=false;
  getField('CALENDAR_WORK_DAYS][4').disabled=false;
  getField('CALENDAR_WORK_DAYS][5').disabled=false;
  getField('CALENDAR_WORK_DAYS][6').disabled=false;
  getField('CALENDAR_NAME').value=getField('CALENDAR_NAME').value.trim();
  var invalidFields     = validateHours();
  var invalidStartHours = invalidFields['CALENDAR_BUSINESS_START'];
  var invalidEndHours   = invalidFields['CALENDAR_BUSINESS_END'];
  for (var i in invalidStartHours){
    if (i>0) {
      if (invalidStartHours[i]!=undefined && invalidStartHours[i]!=''){
        if (startHourMessage==''){
          separator = '';
        } else {
          separator = ',';
        }
        startHourMessage = startHourMessage + separator + i.toString();
      }
    }
  }

  for (var i in invalidEndHours){
    if (i>0) {
      if (invalidEndHours[i]!=undefined && invalidEndHours[i]!=''){
        if (endHourMessage==''){
          separator = '';
        } else {
          separator = ',';
        }
        endHourMessage = endHourMessage + separator + i.toString();
      }
    }
  }
  if(getField('CALENDAR_NAME').value!=''&& invalidCalendarName == '' && startHourMessage=='' && endHourMessage==''){
    getField('CALENDAR_STATUS').disabled=false;
    getField('CALENDAR_NAME').disabled=false;
    document.CalendarDefinition.submit();
  } else {
    if (startHourMessage!=''){
      startHourMessage = '@G::LoadTranslation(ID_INVALID_START_HOURS)' + startHourMessage;
    }
    if (endHourMessage!=''){
      endHourMessage = '@G::LoadTranslation(ID_INVALID_END_HOURS)' + endHourMessage
    }
    msgBox('@G::LoadTranslation(ID_INVALID_NAME)'+'<br>'+startHourMessage+'<br>'+endHourMessage,'alert');
  }
}


function number_row(){ 
  iRows = Number_Rows_Grid('BUSINESS_DAY','CALENDAR_BUSINESS_START');
  return iRows;
}

function cleargrid(){
  number_row();
  i=iRows;
  while (i>1) {
    getObject('BUSINESS_DAY').deleteGridRownomsg('['+i+']');
    i--;
  }
  return false;
}

leimnud.event.add(getField("BUSINESS_DAY_STATUS"), 'click', function() { 
  if(getField("BUSINESS_DAY_STATUS").checked){
    document.getElementById('gridbusiness').style.display="";
    getField("CALENDAR_WORK_DAYS][0").disabled=true;
    getField("CALENDAR_WORK_DAYS][1").disabled=true;
    getField("CALENDAR_WORK_DAYS][2").disabled=true;
    getField("CALENDAR_WORK_DAYS][3").disabled=true;
    getField("CALENDAR_WORK_DAYS][4").disabled=true;
    getField("CALENDAR_WORK_DAYS][5").disabled=true;
    getField("CALENDAR_WORK_DAYS][6").disabled=true;
  } else {
      document.getElementById('gridbusiness').style.display="none";
      cleargrid();
      getField("CALENDAR_WORK_DAYS][0").disabled=false;
      getField("CALENDAR_WORK_DAYS][1").disabled=false;
      getField("CALENDAR_WORK_DAYS][2").disabled=false;
      getField("CALENDAR_WORK_DAYS][3").disabled=false;
      getField("CALENDAR_WORK_DAYS][4").disabled=false;
      getField("CALENDAR_WORK_DAYS][5").disabled=false;
      getField("CALENDAR_WORK_DAYS][6").disabled=false;
    }
});

leimnud.event.add(getField("HOLIDAY_STATUS"), 'click', function() {
  if(getField("HOLIDAY_STATUS").checked){
    document.getElementById('gridholi').style.display="";
    document.getElementById('hiddenb').style.display="";
    document.getElementById('showb').style.display="none";
  } else {
      document.getElementById('gridholi').style.display="none";
      document.getElementById('hiddenb').style.display="none";
      document.getElementById('showb').style.display="";
    }
});

function hiddenholidays() {
  getField('HOLIDAY_STATUS').checked=false;
  document.getElementById('gridholi').style.display="none";
  document.getElementById('down').style.display="none";
  document.getElementById('up').style.display="";
  document.getElementById('hiddenb').style.display="none";
  document.getElementById('showb').style.display="";
}

function showholidays() {
  getField('HOLIDAY_STATUS').checked=true;
  document.getElementById('gridholi').style.display="";
  document.getElementById('down').style.display="";
  document.getElementById('up').style.display="none";
  document.getElementById('hiddenb').style.display="";
  document.getElementById('showb').style.display="none";
}

function cleardrop() {
  while(getField('BUSINESS_DAY][1][CALENDAR_BUSINESS_DAY').options.length > 0) {
    getField('BUSINESS_DAY][1][CALENDAR_BUSINESS_DAY').options[getField('BUSINESS_DAY][1][CALENDAR_BUSINESS_DAY').length-1] = null;
  }
}

function AddItem(Text,Value) {
  var opt = document.createElement("option");
  getField('BUSINESS_DAY][1][CALENDAR_BUSINESS_DAY').options.add(opt);
  opt.text = Text;
  opt.value = Value;
  getField("BUSINESS_DAY_STATUS").disabled=false;
}

function check() {
  cleardrop();
  Text='- ALL -';
  Value=7;
  AddItem(Text,Value);

  if(getField("CALENDAR_WORK_DAYS][0").checked){
    Text='SUN';
    Value=0;
    AddItem(Text,Value);
  }

  if(getField("CALENDAR_WORK_DAYS][1").checked){
    Text='MON';
    Value=1;
    AddItem(Text,Value);
  }

  if(getField("CALENDAR_WORK_DAYS][2").checked){
     Text='TUE';
     Value=2;
     AddItem(Text,Value);
   }

   if(getField("CALENDAR_WORK_DAYS][3").checked){
     Text='WED';
     Value=3;
     AddItem(Text,Value);
   }

   if(getField("CALENDAR_WORK_DAYS][4").checked){
     Text='THU';
     Value=4;
     AddItem(Text,Value);
   }

   if(getField("CALENDAR_WORK_DAYS][5").checked){
     Text='FRI';
     Value=5;
     AddItem(Text,Value);
   }

   if(getField("CALENDAR_WORK_DAYS][6").checked){
     Text='SAT';
     Value=6;
     AddItem(Text,Value); 
   }

   if((getField("CALENDAR_WORK_DAYS][0").checked==false)&&(getField("CALENDAR_WORK_DAYS][1").checked==false)&&(getField("CALENDAR_WORK_DAYS][2").checked==false)&&(getField("CALENDAR_WORK_DAYS][3").checked==false)&&(getField("CALENDAR_WORK_DAYS][4").checked==false)&&(getField("CALENDAR_WORK_DAYS][5").checked==false)&&(getField("CALENDAR_WORK_DAYS][6").checked==false)){
     getField("BUSINESS_DAY_STATUS").disabled=true;
   }
}

leimnud.event.add(getField("CALENDAR_WORK_DAYS][0"), 'click', function() {check();});
leimnud.event.add(getField("CALENDAR_WORK_DAYS][1"), 'click', function() {check();});
leimnud.event.add(getField("CALENDAR_WORK_DAYS][2"), 'click', function() {check();});
leimnud.event.add(getField("CALENDAR_WORK_DAYS][3"), 'click', function() {check();});
leimnud.event.add(getField("CALENDAR_WORK_DAYS][4"), 'click', function() {check();});
leimnud.event.add(getField("CALENDAR_WORK_DAYS][5"), 'click', function() {check();});
leimnud.event.add(getField("CALENDAR_WORK_DAYS][6"), 'click', function() {check();});

	
var dynaformOnload = function() {

  rowsCount=Number_Rows_Grid("BUSINESS_DAY", "CALENDAR_BUSINESS_DAY");
  for(i=1;i<=rowsCount;i++){
    timeValidatorWrap(i);
  }
  grid_BUSINESS_DAY.onaddrow = function (iRow) {
    timeValidatorWrap(iRow);
  }
  getField("BUSINESS_DAY_STATUS").checked=true;
  if(getField("BUSINESS_DAY_STATUS").checked){
    document.getElementById('gridbusiness').style.display="";
    getField("CALENDAR_WORK_DAYS][0").disabled=true;
    getField("CALENDAR_WORK_DAYS][1").disabled=true;
    getField("CALENDAR_WORK_DAYS][2").disabled=true;
    getField("CALENDAR_WORK_DAYS][3").disabled=true;
    getField("CALENDAR_WORK_DAYS][4").disabled=true;
    getField("CALENDAR_WORK_DAYS][5").disabled=true;
    getField("CALENDAR_WORK_DAYS][6").disabled=true;
  } else{
      document.getElementById('gridbusiness').style.display="none";
      cleargrid();
      getField("CALENDAR_WORK_DAYS][0").disabled=false;
      getField("CALENDAR_WORK_DAYS][1").disabled=false;
      getField("CALENDAR_WORK_DAYS][2").disabled=false;
      getField("CALENDAR_WORK_DAYS][3").disabled=false;
      getField("CALENDAR_WORK_DAYS][4").disabled=false;
      getField("CALENDAR_WORK_DAYS][5").disabled=false;
      getField("CALENDAR_WORK_DAYS][6").disabled=false;
    }
  if((getField("CALENDAR_UID").value=="00000000000000000000000000000001")||(getField("CALENDAR_UID").value=="00000000000000000000000000000002")){
    getField("CALENDAR_STATUS").disabled=true;
    getField("CALENDAR_NAME").disabled=true;
    getField("CALENDAR_NAME").style.background="none";
    getField("CALENDAR_NAME").style.border="0";
  }
}

function timeValidatorWrap(iRow){
	getGridField("BUSINESS_DAY", iRow, "CALENDAR_BUSINESS_START").onchange=function startValidation(){
	validateTime(getGridField("BUSINESS_DAY", iRow, "CALENDAR_BUSINESS_START"));
	}
	
	getGridField("BUSINESS_DAY", iRow, "CALENDAR_BUSINESS_START").onblur=function startValidation(){
	validateTime(getGridField("BUSINESS_DAY", iRow, "CALENDAR_BUSINESS_START"));
	}

	getGridField("BUSINESS_DAY", iRow, "CALENDAR_BUSINESS_END").onchange=function startValidation(){
	validateTime(getGridField("BUSINESS_DAY", iRow, "CALENDAR_BUSINESS_END"));
	}
	getGridField("BUSINESS_DAY", iRow, "CALENDAR_BUSINESS_END").onblur=function startValidation(){
	validateTime(getGridField("BUSINESS_DAY", iRow, "CALENDAR_BUSINESS_END"));
	}

	
	
}
function validateForm(form){
 	rowsCount=Number_Rows_Grid("BUSINESS_DAY", "CALENDAR_BUSINESS_DAY");
	msg="";
	
	for(i=1;i<=rowsCount;i++){		
		msgStart="";	
		msgStart=validateTime(getGridField("BUSINESS_DAY", i, "CALENDAR_BUSINESS_START"));
		
		if(msgStart!=""){
			msg+="- "+msgStart+"\n";
		}
		msgEnd="";
		msgEnd=validateTime(getGridField("BUSINESS_DAY", i, "CALENDAR_BUSINESS_END"));
		if(msgEnd!=""){
			msg+="- "+msgEnd+"\n";
		}
		
	}
        getField('CALENDAR_NAME').value=getField('CALENDAR_NAME').value.trim();
	if(getField('CALENDAR_NAME').value==""){ 
	msg+="- Invalid Name \n";
	}
	var flag=true;
	var rowsHoliday=Number_Rows_Grid("HOLIDAY", "CALENDAR_HOLIDAY_START");
	//alert(rowsHoliday);return false;
	var j=0;
	for(var j =1; j<= rowsHoliday;j++){
		msgHolidays = getGridField("HOLIDAY", j, "CALENDAR_HOLIDAY_START");
		if(msgHolidays.value==''){
		flag=false;
		}
	}
	if(!flag){
	msgBox(G_STRINGS.ID_REQUIRED_FIELDS + ": \n Start Date ","alert"); return false;
	}
	if(msg!=""){
		alert(msg);
		return false;
	}
	
	return true;

}

function validateTime(object){
		timeToValidate=object.value;			
		msgError="";
		if(!isValidTime(timeToValidate)){
			G.highLight(object);
			msgError="Invalid: "+object.value;
		}else{
			object.style.background="";
			msgError="";
		}
		return msgError;
}

function isValidTime(value) {
   var hasMeridian = false;
   var re = /^\d{1,2}[:]\d{2}([:]\d{2})?( [aApP][mM]?)?$/;
   if (!re.test(value)) { return false; }
   if (value.toLowerCase().indexOf("p") != -1) { hasMeridian = true; }
   if (value.toLowerCase().indexOf("a") != -1) { hasMeridian = true; }
   var values = value.split(":");
   if ( (parseFloat(values[0]) < 0) || (parseFloat(values[0]) > 23) ) { return false; }
   if (hasMeridian) {
      if ( (parseFloat(values[0]) < 1) || (parseFloat(values[0]) > 12) ) { return false; }
   }
   if ( (parseFloat(values[1]) < 0) || (parseFloat(values[1]) > 59) ) { return false; }
   if (values.length > 2) {
      if ( (parseFloat(values[2]) < 0) || (parseFloat(values[2]) > 59) ) { return false; }
   }
   return true;
}

function cancel(){
 
    window.location = 'calendarList';
}

leimnud.event.add(getField("CALENDAR_NAME"), 'change', function() {
  var oRPC = new leimnud.module.rpc.xmlhttp({
    url : 'calendarValidate',
    args: 'action=calendarName&name='+getField("CALENDAR_NAME").value
  });
  oRPC.callback = function(rpc){
    var scs = rpc.xmlhttp.responseText;
    if (scs != ''){
      //notValidFields['CALENDAR_NAME'] = scs;
      invalidCalendarName = scs;
      msgBox(scs,'alert');
    } else {
      invalidCalendarName = '';
    }
  }.extend(this);
  oRPC.make();
});

<<<<<<< .mine
]]></DEFAULT_CALENDAR_JS>
</dynaForm>
=======
function validateHours(){
  var fields = new Array();
  var invalidStartHours = new Array();
  var invalidEndHours   = new Array();
  var gridForm = getObject('BUSINESS_DAY');
  var rows     = Number_Rows_Grid('BUSINESS_DAY', 'CALENDAR_BUSINESS_DAY');
  var re = /(00|01|02|03|04|05|06|07|08|09|10|11|12|13|14|15|16|17|18|19|20|21|22|23)[:](0|1|2|3|4|5)\d{1}/;
  //alert (rows);
  for ( var i = 1; i <= rows ; i++ ){
    var field_start = getGridField( 'BUSINESS_DAY', i, 'CALENDAR_BUSINESS_START' );
    if (!re.test(field_start.value)){
      invalidStartHours[i] = field_start.value;
    } else {
      invalidStartHours[i] = '';
    }
    var field_end = getGridField( 'BUSINESS_DAY', i, 'CALENDAR_BUSINESS_END' );
    if (!re.test(field_end.value)){
      invalidEndHours[i] = field_end.value;
    } else {
      invalidEndHours[i] = '';
    }
  }
  fields['CALENDAR_BUSINESS_START'] = invalidStartHours;
  fields['CALENDAR_BUSINESS_END']   = invalidEndHours;
  return (fields);
  //getGridField(string grid_name,int row_number,string field_name)
  /*for (var i in gridForm){
    alert(gridForm[i].CALENDAR_BUSINESS_DAY);
  }*/
}

]]>
</DEFAULT_CALENDAR_JS>
</dynaForm>  
>>>>>>> .r125
